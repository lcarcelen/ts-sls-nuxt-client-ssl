<template lang="pug">
  .h-screen.w-screen.bg-gray-200
    .h-screen
      CDotsMenuContacts
      .h-screen.overflow-hidden
        div.w-full.bg-white.shadow-xl.h-20
          div.absolute.right-0
            div.flex.items-center
              div.text-xl.pr-4.text- {{$store.getters.getcurrentUser}}
              amplify-sign-out
        CMenu
        div.block.lg_flex.justify-end.h-screen.overflow-y-scroll(class="w-full h-screen") 
          div.w-full.h-screen.overflow-y-scroll(class="w-full lg_w-6/12" :class="[ $store.getters.darkIsActive ? 'text-red-700' : 'text-green-700']") 
            CChangeMode.lg_hidden
            div.w-full.flex.justify-center
                CCard.h-16.flex.justify-content.items-center.bg-white.mb-6.mt-6.text-lg(class="w-11/12")
                  template(slot='content')
                    span.ml-4.text-3xl Exposicion Data Sensible (.env)
            div.w-full.flex.justify-center
              CCard.h-64.flex.justify-content.items-center.bg-white.mb-6.mt-6.overflow-scroll-y(class="w-11/12")
                template(slot='content')
                  form.w-full
                    h2.text-2xl.ml-4 Form ejecución de código
                    p.text-red-700.ml-4(:class="[ $store.getters.darkIsActive ? 'text-red-700' : 'text-green-700']") Ingresa tu email
                    input.text-gray-700.mt-2.ml-4(style="focus:outline-none" placeholder="example@mail.com" type="text" v-model="form.username" class="w-11/12")
                    div.mt-8.flex.justify-content
                      button.ml-4.bg-red-700.text-black.text-lg.rounded-lg.py-4.shadow-xl.hover_bg-blue-700.focus_outline-none(@click.prevent="fetchSomething" class="w-11/12" :class="[ $store.getters.darkIsActive ? 'bg-red-700' : 'bg-green-700']") Enviar Data 
            div.w-full.flex.justify-center.overflow-scroll-y
              CCard.justify-content.items-center.bg-white.mb-6.mt-6(class="w-11/12")
                template(slot='content')
                  h2.text-2xl.ml-4.block Ejemplo ejecución de código
                  h3 Copie el siguiente código y peguelo en el input de email solicitado
                  p.bg-black.m-8.overflow-hidden {{'&lt;a style="margin: 35px; width: 200px; margin-left: 1rem;border-radius: 0.5rem;padding-top: 1rem;     padding-bottom: 1rem; text-decoration: none; width: 91.666667%;  font-size: 1.125rem;background-color: #c53030;  color: white;  cursor: pointer;box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); "onclick=\'prompt("Ingresa tu Password","*****");\'&gt;Send Data&lt;/a&gt;'}}
            div.w-full.flex.justify-center.overflow-scroll-y
              CCard.justify-content.items-center.bg-white.m-8(class="w-11/12")
                template(slot='content')
                  h2.text-2xl.ml-4.block Form resultado de código
                  p(:class="[ $store.getters.darkIsActive ? 'block' : 'hidden']") Cuado los inputs no se encuentra saneados se puede ingresar codigo html con js que ejecute logica.
                  p(:class="[ $store.getters.darkIsActive ? 'hidden' : 'block']") Cuanto los inputs se encuentran saneados se muestra el codigo html con js que ejecute logica
                  div.m-8.block(v-html="form.username" :class="[ $store.getters.darkIsActive ? 'block' : 'hidden']")
                  div.block(:class="[ $store.getters.darkIsActive ? 'hidden' : 'block']") {{form.username}}
            div.w-full.flex.justify-center.overflow-scroll-y
              CCard.h-32.justify-content.items-center.bg-white.mb-6.mt-6(class="w-11/12")
                template(slot='content')
                  h4.text-2xl.ml-4.block Derechos Reservados CHRONOS
          div.w-full(class="w-full h-screen lg_w-3/12 overflow-y-scroll") 
            CChangeMode.hidden.md_block
            div.w-full.flex.justify-center
              CCard.h-64.flex.justify-content.items-center.bg-white.mb-6.mt-6(class="w-11/12")
                template(slot='content')
                  span.ml-4.mr-4 RESEÑA
                  span.ml-4.mr-4 Una app es vulnerable a los ataques de inyección cuando no hay un protocolo de validación, filtración o saneamiento de los datos del usuario
</template>

<script>
import { components } from 'aws-amplify-vue'
import CDotsMenuContacts from '~/components/CDotsMenuContacts.vue'
import CMenu from '~/components/CMenu.vue'
import CCard from '~/components/CCard.vue'
import CChangeMode from '~/components/CChangeMode.vue'

export default {
  components: {
    ...components,
    CDotsMenuContacts,
    CMenu,
    CCard,
    CChangeMode
  },
  data() {
    return {
      messageLogin: '',
      form: {
        username: '',
        password: ''
      }
    }
  },
  methods: {
    async fetchSomething() {
      const ip = await this.$axios.$get(
        'https://km6ewh68yj.execute-api.us-east-1.amazonaws.com/dev/users',
        {
          headers: {
            'Access-Control-Allow-Origin': '*'
          }
        }
      )
      console.log(ip)
    }
  }
}
</script>
